{{ $tax := or (.Data.Plural) "categories" }}
{{ $active := .Site.Params.activeTaxClass }}

<nav class="taxonomy">
  <ul class="taxonomy-options">
    {{ range $name, $taxonomy := .Site.Taxonomies }}
      {{ $active := ( cond (eq $tax $name) $active "" ) }}
      <li>
        <a data-list-class="{{ $name }}"
           class="clickable {{ $active }}">
          {{ $name }}
        </a>
      </li>
    {{ end }}
  </ul>

  {{ range $name, $taxonomy := .Site.Taxonomies }}
    {{ $active := ( cond (eq $tax $name) $active "" ) }}
    <ul class ="taxonomy-list {{ $name }} {{ $active }}">
      {{ range $taxonomy.ByCount }}
        <li>
          <a href="{{ .Page.Permalink }}"
             class="{{ cond (eq .Page.Title $.Data.Term) "active" ""}}">
             {{ .Page.Title }}
            <span class="float-right">{{ .Count }}</span>
          </a>
        </li>
      {{ end }}
    </ul>
  {{ end }}
</nav>
